# sql-to-go

A tool to generate Go structs from a PostgreSQL database schema.

## Description

This tool is designed to generate Go structs from a PostgreSQL database schema. It can generate either a single `models.go` file with all structs or separate files for each table.

## Installation

```bash
go get -tool github.com/giancarlosisasi/sql-to-go
```

## Usage

```bash
Database Schema to Go Struct Generator
=====================================

Usage:
 go run . -db <database_url> [flags]


Flags:
  -db string
        Postgresql url connection.
  -help
        Show help information
  -mode string
        Output mode: 'combined' (single file), 'separate' (one file per table), or 'both (default "combined")
  -output string
        Output directory for generated go files (default "./models")
  -package string
        Package name for generated Go files (default "models")

Output modes:
  combined  - Generate all structs in a single models.go file (default)
  separate  - Generate one file per table (users.go, posts.go, etc.)
  both      - Generate both combined and separate files

Examples:
 go run . -db "postgres://user:password@localhost:5432/blogapp?sslmode=disable"
 go run . -db "..." -mode separate -output ./internal/models
 go run . -db "..." -mode both -package **entities**

```

## Example

For a table like this:

```sql
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    email VARCHAR(255) NOT NULL UNIQUE,
    password_hash VARCHAR(255) NOT NULL,
    username VARCHAR(100) UNIQUE,
    first_name VARCHAR(100),
    last_name VARCHAR(100),
    avatar_url TEXT,
    bio TEXT,
    is_active BOOLEAN DEFAULT true,
    email_verified_at TIMESTAMP,
    last_login_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);
```

The tool will generate a struct like this:

```go
// Code generated by sql-to-go on 2025-06-23 01:45:06
// DO NOT EDIT - This file was automatically generated

package models

// Users represents the users table
type Users struct {
	Id              int         `json:"id" db:"id"`
	Email           string      `json:"email" db:"email"`
	PasswordHash    string      `json:"password_hash" db:"password_hash"`
	Username        *string     `json:"username,omitempty" db:"username"`
	FirstName       *string     `json:"first_name,omitempty" db:"first_name"`
	LastName        *string     `json:"last_name,omitempty" db:"last_name"`
	AvatarUrl       *string     `json:"avatar_url,omitempty" db:"avatar_url"`
	Bio             *string     `json:"bio,omitempty" db:"bio"`
	IsActive        *bool       `json:"is_active,omitempty" db:"is_active"`
	EmailVerifiedAt interface{} `json:"email_verified_at,omitempty" db:"email_verified_at"`
	LastLoginAt     interface{} `json:"last_login_at,omitempty" db:"last_login_at"`
	CreatedAt       interface{} `json:"created_at,omitempty" db:"created_at"`
	UpdatedAt       interface{} `json:"updated_at,omitempty" db:"updated_at"`
}
```